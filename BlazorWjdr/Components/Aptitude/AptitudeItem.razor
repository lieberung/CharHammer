@using BlazorWjdr.Models

<a href="@_hrefBase/@Item.Id.ToString()/" class="btn btn-light btn-item">
    <span class="oi oi-@(_oiIcon) item-icon mr-1" aria-hidden="true"></span>
    @if (PasDeTooltip || string.IsNullOrWhiteSpace(_toolTipText)) {
        @_itemName
    } else {
        <Tooltip Text="@(_toolTipText)">@_itemName</Tooltip>
    }
</a>

@code{
    [Parameter] public AptitudeDto Item { get; set; } = null!;
    [Parameter] public bool PasDeTooltip { get; set; }

    private string _hrefBase = null!;
    private string _oiIcon = null!;
    private string _toolTipText = null!;
    private string _itemName = null!;

    protected override void OnParametersSet()
    {
        if (Item.EstUneCompetence)
        {
            _hrefBase = "competences";
            _oiIcon = "target";
            _itemName = Item.Nom;
            _toolTipText = "["+Item.CaracteristiqueAssociee+"] " + Item.ResumeComplet;
        }
        else if (Item.EstUnTalent)
        {
            _hrefBase = "talents";
            _oiIcon = "brush";
            _itemName = Item.Nom;
            _toolTipText = Item.ResumeComplet;
        }
        else if (Item.EstUnTrait)
        {
            _hrefBase = "traits";
            _oiIcon = "droplet";
            _itemName = Item.Nom;
            _toolTipText = Item.ResumeComplet;
        }
        
        base.OnParametersSet();
    }

}