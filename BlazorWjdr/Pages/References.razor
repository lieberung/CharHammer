@page "/references"

@using BlazorWjdr.Models
@using BlazorWjdr.Services
@using BlazorWjdr.Components.Reference

@inject ReferencesService _referencesService

<MainTopRow>
    <span class="title-primary top-row-title">Référénces</span>
</MainTopRow>

<div class="content px-4">
    <div class="row">
        
        <div class="col-6">
            <table class="table">
                <tbody>
                @foreach (var reference in _lines
                    .Where(r => r.Version == 1)
                    .OrderBy(r => r.AnneeDePublication))
                {
                    <ReferenceRow Item="@reference"/>
                }
                </tbody>
            </table>
        </div>
        
        <div class="col-6">
            <table class="table">
                <tbody>
                @foreach (var reference in _lines
                    .Where(r => r.Version == 2)
                    .OrderBy(r => r.AnneeDePublication))
                {
                    <ReferenceRow Item="@reference"/>
                }
                </tbody>
            </table>
        </div>
        
    </div>
</div>

@code {
    private ReferenceDto[] _lines = null!;

    protected override async Task OnInitializedAsync()
    {
        _lines = await _referencesService.Items();
    }
}
